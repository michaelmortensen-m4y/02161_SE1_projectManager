package dtu.project.app;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.fail;

import java.util.List;

import org.junit.Test;

/**
 * This class contains tests, testing the functionality of adding projects to the system.
 * @author group 9
 *
 */
public class TestCreateNewProject extends SampleDataSetup {
	/** 
	 * Tests the scenario when an employee successfully creates a new project and is automatically set as project manager.
	 * <ol>
	 *  <li> The employee is logged in
	 * 	<li> The employee provides a name for the project
	 *  <li> The project application creates a new project with that name and generates a unique serial number
	 * </ol>
	 */
	@Test
	public void testCreateProject() {
		
		List<Project> projects = projectApp.getProjects();
		assertEquals(0, projects.size());
		
		assertFalse(projectApp.employeeLoggedIn());
		
		projectApp.login("abcd");
		
		assertTrue(projectApp.employeeLoggedIn());
		
		projectApp.createNewProject("project 1");
		
		assertEquals(1, projects.size());
		assertEquals("project 1", projectApp.getProjectById(projectApp.serialNumberCounter).getName());
		assertEquals(projectApp.activeUser, projectApp.getProjectById(projectApp.serialNumberCounter).getName());
	}
	
	/** 
	 * Tests the scenario when an employee successfully creates a new project and is automatically set as project manager.
	 * <ol>
	 *  <li> The employee is logged in
	 * 	<li> The employee provides a name for the project
	 *  <li> The project application creates a new project with that name and generates a unique serial number
	 * </ol>
	 */
	@Test
	public void testSetNewManager() {
		
		List<Project> projects = projectApp.getProjects();
		assertEquals(0, projects.size());
		
		assertFalse(projectApp.employeeLoggedIn());
		
		projectApp.login("abcd");
		
		assertTrue(projectApp.employeeLoggedIn());
		
		projectApp.createNewProject("project 1");
		
		assertEquals(1, projects.size());
		
		assertEquals(projectApp.getEmployeeByInitials("abcd"), projectApp.getProjectById(projectApp.serialNumberCounter).getProjectManager());
		
		projectApp.setProjectManager(projectApp.getProjectById(projectApp.serialNumberCounter), projectApp.getEmployeeByInitials("efgh"));
		
		assertEquals(projectApp.getEmployeeByInitials("efgh"), projectApp.getProjectById(projectApp.serialNumberCounter).getProjectManager());
		
	}

}
